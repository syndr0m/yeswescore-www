<script type="text/template" id="account"><div class="content-container">
  <div class="account">
    <a class="button" href="#games/me/<%= owner.id %>" data-i18n="account.mymatch" data-js-navigate></a>
    <%
     if( clubid === '' || clubid === undefined ) 
       print ('<a class="button" href="" data-i18n="account.myclub" data-js-navigate="" disabled></a>'); 
     else
       print ('<a class="button" href="#clubs/'+clubid+'" data-i18n="account.myclub" data-js-navigate></a>'); 
    %>
    <a class="button" href="#players/form" data-i18n="account.myprofil" data-js-navigate></a>
    <a class="button" href="#players/signin" data-i18n="account.connect" data-js-navigate></a>
  </div>
</div></script>
<script type="text/template" id="club">  <!-- this is the header div at the top -->
     
  <div class="content-container">
   
  <div class="ltcol">   
  
    <div class="ui-grid-a">
      <div class="ui-block-a" style="width: 20%;">
      <img src="./images/club-pic.jpg" width="40px" height="40px" />
      </div>
      <div class="ui-block-b" style="width: 80%;valign:top;">
      <div class="game-player"><%= club.name %></div>
      <div class="city"><%= club.location.city %></div>
      </div>
    </div>     
    <hr/>
    <b data-i18n="club.outdoor"></b> : <%= club.outdoor %>
    <hr/>
    <b data-i18n="club.indoor"></b> : <%= club.indoor %>
    <hr/>
    <b data-i18n="club.countPlayers"></b> : <%= club.countPlayers %>
    <hr/>
    <b data-i18n="club.countTeams"></b> : <%= club.countTeams %>

    <br/><br/><br/>
    
    <span class="title1">LES MATCHS</span>
    <ul id="listMatchClubs"></ul>
  </div>    
   
      
  <div class="game">
  
    <div id="scoreBoard"></div>
  
    <!--
      LISTCOMMENTS
    -->     
   <div class="commentBoard">  
     <div class="list-comment-title" data-i18n="gamecomment.title"></div> 
     
     <div class="textarea-border">
        <textarea rows="10" cols="40" class="textarea-comment" id="messageText" placeHolder="Ecrire un commentaire"></textarea>
     </div>
     
     <div class="form-button-black"> 
       <span class="button send" data-i18n="gamecomment.send"></span>
     </div>
     
     <div class="zone-list">
          <div class="list-comment"></div>
      </div>
     
    </div>
   
   </div>  
   
  <div class="clear"></div>
  
  </div>
  
</script>
<script type="text/template" id="clubAdd"><div class="gameAdd background"></div>
<div class="gameAdd content-container">
  <div class="simple">
  

<span class="success label label-info hide" style="color: red"></span>

<div>
      <label class="ui-input-text" for="name">* <span data-i18n="clubadd.name"></span></label>
</div>
<div>
		<input type="text" id="name" name="name" data-i18n="[placeholder]clubadd.name;" class='jq-ui-forms' value="" /> 
		<span class="name_error label label-info hide"></span>
</div>

<div>
      <label class="ui-input-text " for="city">* <span data-i18n="clubadd.city"></span></label>
</div>
<div>
		<input type="text" id="city" name="city" data-i18n="[placeholder]clubadd.city;" class='jq-ui-forms' value="" /> 
		<span class="city_error label label-info hide"></span>
</div>

</div>
</div>

<!--
  COMMENT SAVE
-->
<div class="button-form" data-input-mode="hide">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form"><div class="button" data-i18n="clubadd.add"></div></div>  
</div>

</script>
<script type="text/template" id="clubList"><% if(clubs.length==0) { %>
<li><p class="message" data-i18n="message.noresult"></p></li>
<% } %> 
<% for (var i = 0; i < clubs.length; i++) { 

club = clubs[i]; 

if (club.error!==undefined) 
{
  if (club.error.length > 1 ) 
  { 
  %>
  <li><p class="message" data-i18n="message.error"></p></li>
  <%
   break;
  }
}

%>
<li class="club" id="#clubs/<%= club.id %>">
  <div class="ui-grid-a">
    <div class="ui-block-a" style="width: 50px">
    <img src="./images/club-pic.jpg" width="40px" height="40px" />
    </div>
    <div class="ui-block-b" style="width: 90%;valign:top;">
    <div class="game-player"><%= club.name %></div>
    <div class="infos"> <%= club.location.city %> </div>
    </div>
  </div>
</li>
<%

} 
%></script>
<script type="text/template" id="clubListAutoComplete"><% if(clubs.length==0) { %>
<li><p><span data-i18n="message.noresultfor"></span><%= query %></p></li>
<% } %> 
<% for (var i = 0; i < clubs.length; i++) { 
club = clubs[i]; %>

<li title="<% if (club!==undefined) print(club.id); %>">
<input type="checkbox" name="club_choice" value="<% if (club!==undefined) print(club.id); %>" id="club_choice" class="custom" /> 
<label for="club_name"><% if (club!==undefined) print(club.name); %></label><br/>
<label for="club_city"><% if (club!==undefined) print(" - "+club.location.city); %></label>
</li>

<% if (i>6) break; } if (clubs.length>5) { %>
<li>... ( <%= clubs.length %> <span data-i18n="message.results"></span>)</li>
<% } %>
</script>
<script type="text/template" id="clubListSearch"><div class="content-container">
  <div class="indexViewTemplate">
       
    <div class="ui-grid-a searchbar">
      <div class="ui-block-a">
        <div class="input-search-background">
          <input type="search" class="mylib-forms" name="search" id="search-basic" value="" data-i18n="[placeholder]search.clubplaceholder;" />
        </div>
        <span class="button-search" style="">
        </span>
      </div>
      
    </div>
  
    <ul id="listClubsView" class="ui-listview results"></ul>
  <div>
<div>


</script>
<script type="text/template" id="empty"><div class="gameAdd background"></div>
<div class="gameAdd content-container">
  <div class="simple">
  

  </div>
</div>


<div class="button-form" data-input-mode="hide">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form"><div class="button" id="savePlayer" data-i18n="message.loading"></div></div>  
</div>

	</script>
<script type="text/template" id="error"><p class="message" data-i18n="message.noresult"></p></script>
<script type="text/template" id="game">    <!--
      INFO BAR
    -->
    <div class="infobar">
      <!-- icons -->
      <div class="ui-grid-d header">
        <div class="ui-block-a">
          <img src="./images/chrono.png" width="15" height="19" style="margin-top:1px;">
        </div>
        <div class="ui-block-b">
          <img src="./images/calendar.png" width="17" height="20">
        </div>
        <div class="ui-block-c">
          <img src="./images/house.png" width="21" height="19">
        </div>
        <div class="ui-block-d">
          <img src="./images/eye.png" width="20" height="12" style="margin-top:4px;">
        </div>
        <div class="ui-block-e">
        
          <img src="./images/people.png" width="24" height="18">
                          
        </div>
      </div>
      <!-- infos -->
      <div class="ui-grid-d text">
        <div class="ui-block-a">
          <span class="timer"><%= timer %></span>
        </div>
        <div class="ui-block-b">
        <%
        if (game.dates) {        
            if (game.dates.start !== undefined ) {            
              if (game.dates.start==="") {
                 game.dates = {
                   startDate : '',
                   startTime : ''
                 };              
              }
              else { 
                //game.dates.startConvert = new Date(game.dates.start);
                game.dates.startConvert = Date.fromString(game.dates.start);
                game.dates.startConvert.month = game.dates.startConvert.getMonth() + 1;
                game.dates.startDate = ('0'+game.dates.startConvert.getDate()).slice(-2)+'/'+('0'+game.dates.startConvert.month).slice(-2)+'/'+(''+game.dates.startConvert.getFullYear()).slice(-2);
                game.dates.startTime = ('0'+game.dates.startConvert.getHours()).slice(-2)+'h'+('0'+game.dates.startConvert.getMinutes()).slice(-2);
              }
           } 
           else {                      
             game.dates = {
               startDate : '',
               startTime : ''
             };           
          }
        }
        else {        
           game.dates = {
             startDate : '',
             startTime : ''
           };           
        }
        %>
        <b>
        <%= game.dates.startDate  %><br/>
        <%= game.dates.startTime %>
        </b>
        </div>
        <div class="ui-block-c">
        <b><%= game.location.city %></b>
        </div>
        <div class="ui-block-d">
        <b>
        <%
        if (game.status === "ongoing") game.status = i18n.t('game.ongoing');
        else if (game.status === "finished") game.status = i18n.t('game.finished');
        else if (game.status === "created") game.status = i18n.t('game.created');
        print(game.status);
        %>
        </b>
        </div>
        <div class="ui-block-e">
        
        <b><span data-i18n="game.spectators"></span></b>
        
        </div>
      </div>
    </div>

    <!--
      SCOREBOARD
    -->
<div class="scoreBoard">

   <%
   if (game.teams[0].players[0].owner === undefined) 
   { 
   %>     
  <div class="player-info" id="#players/<%= game.teams[0].players[0].id %>"></div>
     <div class="playerInfos" id="#players/<%= game.teams[0].players[0].id %>">  
  <%
   }
   else {
   %>
     <div class="playerInfos">     
   <%
   }
  %>
  
  
    <span class="player-name"> 
      <b class="server1">&nbsp;&nbsp;&nbsp;</b>&nbsp;<%= game.teams[0].players[0].name %>
    </span>
  
    <div class="other">
      <span class="club">
        <%
         if (game.teams[0].players[0].club !== undefined) {  
           print(' '+game.teams[0].players[0].club.name);  
         } 
        %>
      </span>
      <span class="player-rank">
        <%= game.teams[0].players[0].rank %>
      </span>
    </div>
  </div> 
   
    
  <div class="score-grid">
    <div class="ui-grid-c">
        <div class="ui-block-a legend">1</div>
        <div class="ui-block-b legend">2</div>
        <div class="ui-block-c legend">3</div>
        <div class="ui-block-d legend"></div>
        <div class="ui-block-e legend">sets</div>
    </div>

    <div class="ui-grid-c">
        <div class="ui-block-a" id="team1_set1_div"><div class="score"><%= team1_set1 %></div></div>
        <div class="ui-block-b" id="team1_set2_div"><div class="score"><%= team1_set2 %></div></div>
        <div class="ui-block-c" id="team1_set3_div"><div class="score"><%= team1_set3 %></div></div>
        <div class="ui-block-d"></div>
        <div class="ui-block-e" id="team1_sets_div"><div class="score sets"><%= team1_sets %></div></div>
    </div>
    <!-- /grid-a -->

    <div class="ui-grid-c" style="margin-top:6px;">
        <div class="ui-block-a" id="team2_set1_div"><div class="score"><%= team2_set1 %></div></div>
        <div class="ui-block-b" id="team2_set2_div"><div class="score"><%= team2_set2 %></div></div>
        <div class="ui-block-c" id="team2_set3_div"><div class="score"><%= team2_set3 %></div></div>
        <div class="ui-block-d"></div>
        <div class="ui-block-e" id="team2_sets_div"><div class="score sets"><%= team2_sets %></div></div>
    </div>
    <div class="separator"></div>
  </div>

   <%
   if (game.teams[1].players[0].owner === undefined) 
   { 
   %>     
    <div class="player-info" id="#players/<%= game.teams[1].players[0].id %>"></div>
      <div class="playerInfos" id="#players/<%= game.teams[1].players[0].id %>">  
  <%
   }
   else {
   %>
      <div class="playerInfos">     
   <%
   }
  %>
         
    
    <span class="player-name">   
       <b class="server2">&nbsp;&nbsp;&nbsp;</b>&nbsp;<%= game.teams[1].players[0].name %>
    </span>
    <div class="other">
      <span class="club">
      <% 
        if (game.teams[1].players[0].club !== undefined) {  
          print(' '+game.teams[1].players[0].club.name);  
        } 
      %>
      </span>
      <span class="player-rank">
        <%= game.teams[1].players[0].rank %>
      </span>
    </div>
  </div>
  
 
</div>




</script>
<script type="text/template" id="gameAdd"><div class="gameAdd background"></div>
<div class="gameAdd content-container">

  <div id="gameAddForm" class="zone-list simple">
	    <span class="success label label-info hide"></span>
	
      <div class="form-label" data-i18n="gameadd.player1"></div>

		  <div class="ui-grid-b first-team me">
			  <div class="ui-block-a">
				  <input type="text" id="team1" name="team1" data-i18n="[placeholder]gameadd.player1_holder;" value="" data-autocomplete="autocompletePlayers" data-autocomplete-onselected="autocompleteTeam1" disabled/>
			  </div>
			  <div class="ui-block-b">
				  <input type="text" id="rank1" name="rank1" data-i18n="[placeholder]gameadd.rank;" class='jq-ui-forms-white' value="" />
			  </div>
        <div class="ui-block-c" data-input-mode="hide">
				  <span class="form-button other-team" data-i18n="gameadd.other"></span>
			  </div>
		  </div>
		
		  <div>				
			  <ul id="team1_suggestions" data-role="listview" data-inset="true"></ul>
			  <input type="hidden" id="team1_id" class="input" value="" /> 
			  <span class="team1_error label label-info hide"></span>
		  </div>
	
      <div class="form-label" data-i18n="gameadd.player2"></div>

		  <div class="ui-grid-b">
			  <div class="ui-block-a">
				  <input type="text" id="team2" name="team2" data-i18n="[placeholder]gameadd.player2;" value="" data-autocomplete="autocompletePlayers" data-autocomplete-onselected="autocompleteTeam2"/>
			  </div>
			  <div class="ui-block-b">
				  <input type="text" id="rank2" name="rank2" data-i18n="[placeholder]gameadd.rank;" value="" />
			  </div>
        <div class="ui-block-c">
          <span class="form-button more-options" data-i18n="gameadd.plus"></span>
        </div>
		  </div>
		
        <div>
          <ul id="team2_suggestions" data-role="listview" data-inset="true"></ul>
          <input type="hidden" id="team2_id" class="input" value="" /> 
          <span class="team2_error label label-info hide"></span>
        </div>  
    
      <div class="additionnal-options">	

        <div class="form-label" style="position:relative" data-i18n="gameadd.city"></div>
        
		    <div>
			    <input type="text" id="city" name="city" data-i18n="[placeholder]gameadd.city;" value="" /> 
			    <span class="city_error label label-info hide"></span>
		    </div>
        
            <div id="inject-select"></div>
		
		    

      </div>
      
        <div style="padding:20px"></div>
        
    </div>
</div>

<!--
  LINKS TO COMMENTS
-->
<div class="button-form" data-input-mode="process">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form"><div class="button" id="addGame" data-i18n="gameadd.submit"></div></div>
</div>



</script>
<script type="text/template" id="gameComments"><div class="comments background"></div>
<div class="comments content-container">
  <div class="zone-score"></div>

  <div class="zone-list">
    <div>
      <div class="list-comment-title" data-i18n="gamecomment.title"></div>
      <div class="list-comment">
      </div>
    </div>
    <br/>
    <div class="textarea-border">
      <textarea rows="10" cols="40" class="textarea-comment" id="messageText" data-i18n="[placeholder]gamecomment.placeholder;"></textarea>
    </div>
  </div>
</div>

<!--
  SAVE COMMENTS
-->
<div class="button-form" data-input-mode="process">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form"><div class="button send" data-i18n="gamecomment.send"></div></div>
</div>
</script>
<script type="text/template" id="gameCommentsComment"><div class="comment" id="comment<%= streamItem.id %>">
  <% 
    //var startConvert = new Date(streamItem.dates.creation);
    var startConvert = Date.fromString(streamItem.dates.creation);
    var startDate = String(startConvert.getDate()).padLeft(2, "0") +' '+startConvert.getMonthName()+' '+startConvert.getFullYear();
    var startTime = ' '+String(startConvert.getHours()).padLeft(2, "0") + ':' + String(startConvert.getMinutes()).padLeft(2, "0");
    var now = new Date();
    var today = (startConvert.getDate() == now.getDate() &&
                 startConvert.getMonth() == now.getMonth() &&
                 startConvert.getFullYear() == now.getFullYear());
  %>
	<div class="infocomment">
    <span class="player-name">
      <% if (streamItem.owner.player!==undefined) { %>
        <%= (streamItem.owner.player.name ||'Anonymous') %>
      <% } %>
      <% if (streamItem.owner.facebook!==undefined) { %>
        <%= (streamItem.owner.facebook.name ||'Anonymous') %> 
      <% } %>
    </span> <span data-i18n="gamecomment.said"></span>
    <% if (!today) { %>
      <span data-i18n="gamecomment.the"></span> <%= startDate %> 
    <% } %>
      <span data-i18n="gamecomment.by"></span> <%= startTime %>
  </div> 

  <%= streamItem.data.text %> 

  <div class="links">
	  <% if (streamItem.owner.player!==undefined && owner && streamItem.owner.player.id === owner.id ) { %> 
            <a class="deleteComment" data-js-streamitemid="<%= streamItem.id %>" data-js-call="deleteComment" data-i18n="gamecomment.delete"></a> 
    <% } %>
	  <% if (streamItem.owner.player!==undefined && owner && streamItem.owner.player.id !== owner.id ) { %> 
        <a class="warnComment" data-js-streamitemid="<%= streamItem.id %>" data-js-call="reportComment" data-i18n="gamecomment.alert"></a> 
    <% } %>
  </div>
</div>
</script>
<script type="text/template" id="gameCommentsScore"><% 
  var team1_set1 = '&nbsp;'; 
  var team1_set2 = '&nbsp;'; 
  var team1_set3 = '&nbsp;';
  var team2_set1 = '&nbsp;'; 
  var team2_set2 = '&nbsp;'; 
  var team2_set3 = '&nbsp;';
  var set_current = 1; 
  var team1_sets = '0'; 
  var team2_sets = '0'; 

  if (game) {
    if (game.infos.score !== null ) { 
      if(game.infos.score.indexOf('/')!=-1) { 
        scoreboard = game.infos.score.split('/'); 
        team1_sets = scoreboard[0]; 
        team2_sets = scoreboard[1]; 
        } 
    } 
  
    if (game.infos.sets !== null ) { 
      if (game.infos.sets.indexOf(';')!=-1) { 
        scoreboard = game.infos.sets.split(';'); 
    
        if (scoreboard.length==2 ||scoreboard.length==3) { 
          scoreboard1 = scoreboard[0].split('/');
          team1_set1 = scoreboard1[0]; 
          team2_set1 = scoreboard1[1]; 
          scoreboard2 = scoreboard[1].split('/'); 
          team1_set2 = scoreboard2[0]; 
          team2_set2 = scoreboard2[1]; 
          set_current=2; 
        } 
    
        if (scoreboard.length==3) { 
          scoreboard3 = scoreboard[2].split('/'); 
          team1_set3 = scoreboard3[0]; 
          team2_set3 = scoreboard3[1]; set_current=3; 
        } 
      } 
      // 1 set 
      else { 
        if (game.infos.sets.indexOf('/')!=-1) { 
          scoreboard1 = game.infos.sets.split('/'); 
          team1_set1 = scoreboard1[0]; 
          team2_set1 = scoreboard1[1]; 
        } 
      } 
    } 
  } else {
    // FIXME: moving the loading stuff in a dedicated place.
    // FIXME: use l18n
    game = {
      teams: [
        { players: [ { name: "Please wait, loading..." } ] },
        { players: [ { name: "" } ] }
      ]
    };
  }
%>

<div class="ui-grid-a">
  <div class="ui-block-a colTimer" style="">
  <img src="./images/chrono.png" width="15" height="19"><br/>
  <span class="timer"><%= timer %></span>
  </div>
  <div class="ui-block-b players">
  
      <div class="ui-grid-d player-infos">
     
          <div class="ui-block-a player-name" style="width:58%;">
    	<% 
    	if (game.teams[0].players[0]!== undefined) { 
    		print('<b>'+game.teams[0].players[0].name+'</b>&nbsp;<b class="server1">&nbsp;&nbsp;&nbsp;</b><br/>');
    	}
    	%>         
          </div>
          <div class="ui-block-b" style="width: 10%;"><span class="div_set_scoreboard"><%= team1_set1 %></span></div>
          <div class="ui-block-c" style="width: 10%;"><span class="div_set_scoreboard"><%= team1_set2 %></span></div>
          <div class="ui-block-d" style="width: 10%;"><span class="div_set_scoreboard"><%= team1_set3 %></span></div>
          <div class="ui-block-e" style="width: 2%;"></div>
          <div class="ui-block-f" style="width: 10%;"><span class="div_set_scoreboard div_set"><%= team1_sets %></span></div>
      </div>
    
    <!-- 
    style="padding-bottom:3px;"
      -->
      <div class="ui-grid-d player-infos">
     
          <div class="ui-block-a player-name" style="width:58%;">
    	<% 
    	if (game.teams[1].players[0]!== undefined) { 	
            print('<b>'+game.teams[1].players[0].name+'</b>&nbsp;<b class="server2">&nbsp;&nbsp;&nbsp;</b><br/>');    			
    	}
    	%>         
          </div>
          <div class="ui-block-b" style="width: 10%;"><span class="div_set_scoreboard"><%= team2_set1 %></span></div>
          <div class="ui-block-c" style="width: 10%;"><span class="div_set_scoreboard"><%= team2_set2 %></span></div>
          <div class="ui-block-d" style="width: 10%;"><span class="div_set_scoreboard"><%= team2_set3 %></span></div>
          <div class="ui-block-e" style="width: 2%;"></div>
          <div class="ui-block-f" style="width: 10%;"><span class="div_set_scoreboard div_set"><%= team2_sets %></span></div>
      </div>
  </div>
</div></script>
<script type="text/template" id="gameEnd"><div class="gameAdd background"></div>
<div class="gameAdd content-container">
  <div class="simple">
  
    <span class="success label label-info hide"></span>
    
	<div>
		<label data-i18n="gameend.saveprivate"></label>
		<textarea id="privateNote" name="privateNote" class="jq-ui-forms"></textarea>
		<span class="privateNote_error label label-info hide"></span>
	</div>

	<div>
		<label data-i18n="gameend.savefb"></label>
		<textarea id="fbNote" name="fbNote" class="jq-ui-forms"></textarea>
		<span class="fbNote_error label label-info hide"></span>
	</div>

  </div>
</div>


<!--
  COMMENT SAVE
-->
<div class="button-form" data-input-mode="hide">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form"><div class="button" data-i18n="gameend.finish"></div></div>  
</div>
</script>
<script type="text/template" id="gameForm"><div class="gameAdd background"></div>
<div class="gameAdd content-container">
  <div class="">

    <span class="success label label-info hide"></span>


    <div class="account">
      <a href="#" class="warning" id="deleteMatch" data-i18n="gameform.delete"></a>
    </div>

    <hr />

	<!-- 
    <div style="padding-top: 10px">
      <label class="form-label" for="city" data-i18n="gameform.date"></label>
    </div>
    <div>
      <input type="date" id="city" name="date" value="<%= game.dates.start %>" /> 
        <span class="date_error label label-info hide"></span>
    </div>

    <div style="padding-top: 10px">
      <label class="form-label" for="city" data-i18n="gameform.time"></label>
    </div>
    <div>
      <input type="time" id="city" name="time" value="" /> <span
        class="time_error label label-info hide"></span>
    </div>
     -->

    <div class="ui-grid-b">
	  <div class="ui-block-a">
		  <input type="text" id="team1" name="team1" data-i18n="[placeholder]gameadd.player1;" value=""/> 
    </div>
	  <div class="ui-block-b">
		  <input type="text" id="rank1" name="rank1" data-i18n="[placeholder]gameadd.rank;" value="" />
          <input type="hidden" id="owner1" name="owner1" value="" />      
	  </div>
    </div> 
    
        
    <span class="team1_error label label-info hide"></span> 
     
    <div class="ui-grid-b" style="padding-top: 10px">
	  <div class="ui-block-a">
		  <input type="text" id="team2" name="team2" data-i18n="[placeholder]gameadd.player2;" value=""/>
	  </div>
	  <div class="ui-block-b">
		  <input type="text" id="rank2" name="rank2" data-i18n="[placeholder]gameadd.rank;" value="" />
          <input type="hidden" id="owner2" name="owner2" value="" />      
	  </div>
    </div>  
    
    <span class="team2_error label label-info hide"></span>    

    <div style="padding-top: 10px">
      <label class="form-label" for="city" data-i18n="gameform.city"></label>
    </div>
    <div>
      <input type="text" id="city" name="city" data-i18n="[placeholder]gameform.city;" value="<%= game.location.city %>" /> 
        <span class="city_error label label-info hide"></span>
    </div>

    <div style="padding-top: 10px">
      <label class="form-label" data-i18n="gameform.whoserverdfirst"></label>
    </div>    
    <div class="serverbar">
      <div class="ui-grid-a">
        <div class="ui-block-a button">
          <a id="startTeam1"><%= game.teams[0].players[0].name %></a>
        </div>
        <div class="ui-block-c button">
          <a id="startTeam2"><%= game.teams[1].players[0].name %></a>   
        </div>
      </div>      
    </div>    
    
    <div id="inject-select"></div>
    

  </div>
</div>


<!--
  COMMENT SAVE
-->
<div class="button-form" data-input-mode="process">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form">
    <div class="button" id="updateGame" data-i18n="gameform.update"></div>
  </div>
</div>

</script>
<script type="text/template" id="gameInput">     <div style="padding-top: 10px">
      <label class="form-label" for="official" data-i18n="gameadd.official"></label>
    </div>
    <div>
      <div class="form-radio-android">
        <input id="competition" type="radio" name="competition" value="yes"/>
        <label data-i18n="gameadd.yes"></label>
        <input id="competition" type="radio" name="competition" value="no"/>
        <label data-i18n="gameadd.no"></label>
      </div>
    </div>
    
             
    <!--      
          <div class="ui-grid-a">

          
          <div class="ui-block-a">
            <div class="form-label" data-i18n="gameadd.court"></div>
          </div>
          <div class="ui-block-b">
            <div class="form-label" data-i18n="gameadd.tour"></div>
          </div>
          <div class="ui-block-a" style="padding-right:5px;">
            <input name="court" id="court" value="" style="width:100%" data-i18n="[placeholder]gameadd.court;"/>
          </div>
          <div class="ui-block-b" style="padding-left:5px;">            
            <input name="tour" id="tour" value="" style="width:100%" data-i18n="[placeholder]gameadd.tour;"/>          
          </div>
        </div>
        

        <div class="ui-grid-a">
          <div class="ui-block-a">
                  <div class="form-label" data-i18n="gameadd.surface"></div>
          </div>
          <div class="ui-block-b">
                  <div class="form-label" data-i18n="gameadd.official"></div>
          </div>
          <div class="ui-block-a" style="padding-right:5px;">
            <input name="surface" id="surface" value="" style="width:100%" data-i18n="[placeholder]gameadd.surface;"/> 
           </div>
           <div class="ui-block-b" style="padding-right:1px;">
                <div class="form-radio-android">
                  <input id="competition" type="radio" name="competition" value="yes"/>
                  <label data-i18n="gameadd.yes"></label>
                  <input id="competition" type="radio" name="competition" value="no"/>
                  <label data-i18n="gameadd.no"></label>
              </div>
           </div>
            </div>
     -->  </script>
<script type="text/template" id="gameList"><% if(games.length==0) { %>
<li><p class="message" data-i18n="message.noresult"></p></li>
<% } %> 
<% for (var i = 0; i < games.length; i++) { 

game = games[i]; 

if (game.error!==undefined) 
{
  if (game.error.length > 1 ) 
  {  
%>
<li><p class="message" data-i18n="message.error"></p></li>
<%
   break;
  }
}


team1_set1 = '&nbsp;'; 
team1_set2 = '&nbsp;'; 
team1_set3 = '&nbsp;';
team2_set1 = '&nbsp;'; 
team2_set2 = '&nbsp;'; 
team2_set3 = '&nbsp;';
set_current = 1; 
team1_sets = '0'; 
team2_sets = '0'; 

if (game.infos.score !== null ) { 
  if(game.infos.score.indexOf('/')!=-1) { 
    scoreboard = game.infos.score.split('/'); 
    team1_sets = scoreboard[0]; 
    team2_sets = scoreboard[1]; 
    } 
} 
  
if (game.infos.sets !== null ) { 
  if (game.infos.sets.indexOf(';')!=-1) { 
    scoreboard = game.infos.sets.split(';'); 
    
    if (scoreboard.length==2 ||scoreboard.length==3) { 
      scoreboard1 = scoreboard[0].split('/');
      team1_set1 = scoreboard1[0]; 
      team2_set1 = scoreboard1[1]; 
      scoreboard2 = scoreboard[1].split('/'); 
      team1_set2 = scoreboard2[0]; 
      team2_set2 = scoreboard2[1]; 
      set_current=2; 
    } 
    
    if (scoreboard.length==3) { 
      scoreboard3 = scoreboard[2].split('/'); 
      team1_set3 = scoreboard3[0]; 
      team2_set3 = scoreboard3[1]; set_current=3; 
    } 
  } 
  // 1 set 
  else { 
    if (game.infos.sets.indexOf('/')!=-1) { 
      scoreboard1 = game.infos.sets.split('/'); 
      team1_set1 = scoreboard1[0]; 
      team2_set1 = scoreboard1[1]; 
    } 
  } 
} 

if (game.dates.start !== undefined ) {  
	//game.dates.startConvert = new Date(game.dates.start);
    game.dates.startConvert = Date.fromString(game.dates.start);
	game.dates.startDate = game.dates.startConvert.getDate()+' '+game.dates.startConvert.getMonthName()+' '+game.dates.startConvert.getFullYear();
}
else
	game.dates.startDate = 'A venir';


if (game.status === "ongoing") game.status = i18n.t('game.ongoing');
else if (game.status === "finished") game.status = i18n.t('game.finished');
else if (game.status === "created") game.status = i18n.t('game.created');
 
%>
<li id="#games/<%= game.id %>">

<div class="ui-grid-a">
	<div class="ui-block-a game-location" style="width: 80%;"> 
    <%= game.dates.startDate %> - <%= game.location.city %> 
    <% 
      if (game.infos.tour !== "")  
        if (game.infos.tour > 0)     
         print(" - "+i18n.t("gameadd.select"+game.infos.tour))     
    %> 
	</div>
	<div class="ui-block-b game-status" style="width: 20%;">
	<%= game.status %>
	</div>
</div>

 <div class="ui-grid-d" style="margin-top:5px">
     <div class="ui-block-a game-player" style="width:63%;">
	<% 
	if (game.teams[0].players[0]!== undefined) { 
		print("<b>"+game.teams[0].players[0].name+"</b><br/>&nbsp;");
    
		print('<span class="div_score_mini">');
		print(game.teams[0].players[0].rank);	
		
		if (game.teams[0].players[0].club !== undefined) {	
		
			
		  if (game.teams[0].players[0].club.name.length>20)
		  	game.teams[0].players[0].club.name = game.teams[0].players[0].club.name.substr(0,19);		
		    print(' '+game.teams[0].players[0].club.name);	
		}	
		print('</span>');	
	}
	%>         
     </div>
     <div class="ui-block-b" style="width: 9%;"><span class="div_set_scoreboard"><%= team1_set1 %></span></div>
     <div class="ui-block-c" style="width: 9%;"><span class="div_set_scoreboard"><%= team1_set2 %></span></div>
     <div class="ui-block-d" style="width: 9%;"><span class="div_set_scoreboard"><%= team1_set3 %></span></div>
     <div class="ui-block-e" style="width:10%;"><span class="div_set_scoreboard div_set"><%= team1_sets %></span></div>
 </div>

 <div class="ui-grid-d" style="margin-top:5px">
     <div class="ui-block-a game-player" style="width:63%;">
	<% 
	if (game.teams[1].players[0]!== undefined) { 
		print("<b>"+game.teams[1].players[0].name+"</b><br/>&nbsp;");	
		print('<span class="div_score_mini">');
		print(game.teams[1].players[0].rank);	

		if (game.teams[1].players[0].club !== undefined) {
		
		
		  if (game.teams[1].players[0].club.name.length>20)
		  	game.teams[1].players[0].club.name = game.teams[1].players[0].club.name.substr(0,19);
		   print(' '+game.teams[1].players[0].club.name);	
		}
		print('</span>');		
	}
	%>         
     </div>
     <div class="ui-block-b" style="width: 9%;"><span class="div_set_scoreboard"><%= team2_set1 %></span></div>
     <div class="ui-block-c" style="width: 9%;"><span class="div_set_scoreboard"><%= team2_set2 %></span></div>
     <div class="ui-block-d" style="width: 9%;"><span class="div_set_scoreboard"><%= team2_set3 %></span></div>
     <div class="ui-block-e" style="width:10%;"><span class="div_set_scoreboard div_set"><%= team2_sets %></span></div>
 </div>
 
</li>
<% } %>
</script>
<script type="text/template" id="gameListSearch"><div class="content-container">
  <div class="indexViewTemplate">
    <div class="ui-grid-a searchbar">
      <div class="ui-block-a">
        <div class="input-search-background">
          <input type="search" class="mylib-forms" name="search" id="search-basic" value="" data-i18n="[placeholder]search.gameplaceholder;" />
        </div>
        <span class="button-search" style=""><!-- magnifier glass @see http://tenbytwenty.com/?xxxx_posts=sosa --></span>
      </div>
            
      <% if (button === true) { %>
      <div class="ui-block-b">
        <div class="button-option-right"></div>
      </div>
      <!-- 
      <div class="filters">
            
        <div class="ui-grid-a menu-options">
          <div class="ui-block-a">
            <div class="title-menu">FILTRE :</div>         
            <a data-filter="match-all" data-i18n="search.filtermatchall" id="filter-match-all"></a>           
            <a data-filter="match-geo" data-i18n="search.filtermatchgeo" id="filter-match-geo"></a>
            <a data-filter="match-club" data-i18n="search.filtermatchclub" id="filter-match-club"></a>
          </div>
          <div class="ui-block-b">
	        <div class="title-menu">ETAT :</div>         
	        <a data-filter="filter-date" data-i18n="search.filterstatusall" id="filter-statut-all"></a>
	        <a data-filter="filter-location" data-i18n="search.filterlocation" id="filter-location"></a>         
            <a data-filter="filter-status" data-i18n="search.filterstatus" id="filter-status"></a>  
          </div>
          <div class="separator"></div>
        </div>
    
       </div>
        -->
        
       <% } 
       else { %>
      <div class="ui-block-b">
        <span class="form-button refresh" data-i18n="gameadd.refresh"></span>
      </div>             
       <% } %>
       
       
       
    </div>
    
    <div class="ui-grid-c search">
      <div class="ui-block-a">
        <a data-filter="filter-status-all" data-i18n="search.filterstatusall"></a>
      </div>
      <div class="ui-block-b">
        <a data-filter="filter-status-ongoing" data-i18n="search.filterstatusongoing"></a>
      </div>
      <div class="ui-block-c">
        <a data-filter="filter-status-finished" data-i18n="search.filterstatusfinished"></a>
      </div>
      <div class="ui-block-d">
        <a data-filter="filter-status-created" data-i18n="search.filterstatuscreated"></a>
      </div>
    </div>  
    
    
    <ul id="listGamesView" class="ui-listview results"></ul>
  <div>
<div></script>
<script type="text/template" id="gameOLD">
<div class="content-container">
  <div class="game">


    <div class="infobar">

      <div class="ui-grid-d header">
        <div class="ui-block-a">
          <img src="./images/chrono.png" width="15" height="19" style="margin-top:1px;">
        </div>
        <div class="ui-block-b">
          <img src="./images/calendar.png" width="17" height="20">
        </div>
        <div class="ui-block-c">
          <img src="./images/house.png" width="21" height="19">
        </div>
        <div class="ui-block-d">
          <img src="./images/eye.png" width="20" height="12" style="margin-top:4px;">
        </div>
        <div class="ui-block-e">
        <% if (game.owner === playerid) { %>
          <img src="./images/undo.png" width="20" height="20" class="undoSelect">
        <% }
           else { 
         %>
          <img src="./images/people.png" width="24" height="18">
        <% } %>                  
        </div>
      </div>
 
      <div class="ui-grid-d text" >
        <div class="ui-block-a">
          <span class="timer"><%= timer %></span>
        </div>
        <div class="ui-block-b">
        <%
        if (game.dates) {        
            if (game.dates.start !== undefined ) {            
              if (game.dates.start==="") {
                 game.dates = {
                   startDate : '',
                   startTime : ''
                 };              
              }
              else { 
                //game.dates.startConvert = new Date(game.dates.start);
                game.dates.startConvert = Date.fromString(game.dates.start);
                game.dates.startConvert.month = game.dates.startConvert.getMonth() + 1;
                game.dates.startDate = ('0'+game.dates.startConvert.getDate()).slice(-2)+'/'+('0'+game.dates.startConvert.month).slice(-2)+'/'+(''+game.dates.startConvert.getFullYear()).slice(-2);
                game.dates.startTime = ('0'+game.dates.startConvert.getHours()).slice(-2)+'h'+('0'+game.dates.startConvert.getMinutes()).slice(-2);
              }
           } 
           else {                      
             game.dates = {
               startDate : '',
               startTime : ''
             };           
          }
        }
        else {        
           game.dates = {
             startDate : '',
             startTime : ''
           };           
        }
        %>
        <b>
        <%= game.dates.startDate  %><br/>
        <%= game.dates.startTime %>
        </b>
        </div>
        <div class="ui-block-c">
        <b><%= game.location.city %></b>
        </div>
        <div class="ui-block-d">
        <b><span data-i18n="game.public"></span></b>
        </div>
        <div class="ui-block-e">
        <% if (game.owner === playerid) { %>
        <b><span data-i18n="game.undo" class="undoSelect"></span></b>
        <% } 
        else { %>
        <b><span data-i18n="game.spectators"></span></b>
        <% } %>
        </div>
      </div>
    </div>


    <div id="scoreBoard">
  
    </div>


    <div class="socialbar">
      <% if (game.owner === playerid) { %>
	      <div class="ui-grid-b">
		   <div class="ui-block-a button">
		   <%
		     if (game.status === "finished" || game.status === "canceled") 
             {
             %>
              <a id ="statusRestart" data-i18n="game.restart"></a>
             <%
             }
             else {
             %>
              <a id="optionButton" data-i18n="game.options"></a>
             <%
             }
             %>
		   </div>
          <div id="facebook" class="ui-block-b share">
            <div class="facebook"><img src="./images/facebook.png" width="11" height="22" /></div>
          </div>
		      <div class="ui-block-c button status">
                <% if (game.status === "created" ) { %>
		        <a id="statusButton" data-i18n="game.begin"></a>
                <% }
                else if (game.status === "finished" || game.status === "canceled") 
                {
                %>
                <a id ="statusButton" data-i18n="game.gamefinished"></a>
                <%                  
                }
                else {
                %>
                <a id="statusButton" data-i18n="game.finish"></a>
                <%
                }
                %>
		      </div>
        </div>
      <% } else { %> 
        <div class="ui-grid-b">
          <div class="ui-block-a button">
            <a id="followButton">
              <% if (follow === 'true') { %>
              <span data-i18n="message.nofollow"></span>
              <% } else { %>
              <span data-i18n="message.follow"></span>
              <% } %> 
            </a>
          </div>
          <div id="facebook" class="ui-block-b">
            <div class="facebook">
              <span class="message ok">ok</span>
              <span class="message ko">error</span>
              <img src="./images/facebook.png" width="11" height="22" />
            </div>
          </div>          
          <div class="ui-block-c buttonSpecial">
            <%
            if (game.status === "finished") {
            %>
            <span data-i18n="game.gamefinished"></span>
            <%                  
            }
            else if (game.status === "created") {
            %>
            <span data-i18n="game.gamecreated"></span>
            <%                  
            }            
            else if (game.status === "canceled") {
            %>
            <span data-i18n="game.gamecanceled"></span>
            <%                  
            } 
            else  {
            %>
            <span data-i18n="game.gameongoing"></span>
            <%
            }
            %>
          </div>
       </div>
      <% } %>
      
      
      <br/>
    </div>
    <% if (game.owner === playerid && game.infos.startTeam === undefined) { %>
    <div class="serverbar">
      <div class="ui-grid-b">
		<div class="ui-block-a button">
		<a id="startTeam1"><%= game.teams[0].players[0].name %></a>
		</div>
        <div class="ui-block-b question">
        <label>Qui sert en Premier?</label>
        </div>
		<div class="ui-block-c button">
		<a id="startTeam2"><%= game.teams[1].players[0].name %></a>		
		</div>
      </div>      
    </div>
    <% } %>
    
    
  </div>
</div>



</script>
<script type="text/template" id="gameScoreBoard"><div class="scoreBoard">

   <%
   if (game.teams[0].players[0].owner === undefined) 
   { 
   %>     
  <div class="player-info" id="#players/<%= game.teams[0].players[0].id %>"></div>
     <div class="playerInfos" id="#players/<%= game.teams[0].players[0].id %>">  
  <%
   }
   else {
   %>
     <div class="playerInfos">     
   <%
   }
  %>
  
  
    <span class="player-name"> 
      <b class="server1">&nbsp;&nbsp;&nbsp;</b>&nbsp;<%= game.teams[0].players[0].name %>
    </span>
  
    <div class="other">
      <span class="club">
        <%
         if (game.teams[0].players[0].club !== undefined) {  
           print(' '+game.teams[0].players[0].club.name);  
         } 
        %>
      </span>
      <span class="player-rank">
        <%= game.teams[0].players[0].rank %>
      </span>
    </div>
  </div> 
   
    
  <div class="score-grid">
    <div class="ui-grid-c">
        <div class="ui-block-a legend">1</div>
        <div class="ui-block-b legend">2</div>
        <div class="ui-block-c legend">3</div>
        <div class="ui-block-d legend"></div>
        <div class="ui-block-e legend">sets</div>
    </div>

    <div class="ui-grid-c">
        <div class="ui-block-a" id="team1_set1_div"><div class="score"><%= team1_set1 %></div></div>
        <div class="ui-block-b" id="team1_set2_div"><div class="score"><%= team1_set2 %></div></div>
        <div class="ui-block-c" id="team1_set3_div"><div class="score"><%= team1_set3 %></div></div>
        <div class="ui-block-d"></div>
        <div class="ui-block-e" id="team1_sets_div"><div class="score sets"><%= team1_sets %></div></div>
    </div>
    <!-- /grid-a -->

    <div class="ui-grid-c" style="margin-top:6px;">
        <div class="ui-block-a" id="team2_set1_div"><div class="score"><%= team2_set1 %></div></div>
        <div class="ui-block-b" id="team2_set2_div"><div class="score"><%= team2_set2 %></div></div>
        <div class="ui-block-c" id="team2_set3_div"><div class="score"><%= team2_set3 %></div></div>
        <div class="ui-block-d"></div>
        <div class="ui-block-e" id="team2_sets_div"><div class="score sets"><%= team2_sets %></div></div>
    </div>
    <div class="separator"></div>
  </div>

   <%
   if (game.teams[1].players[0].owner === undefined) 
   { 
   %>     
    <div class="player-info" id="#players/<%= game.teams[1].players[0].id %>"></div>
      <div class="playerInfos" id="#players/<%= game.teams[1].players[0].id %>">  
  <%
   }
   else {
   %>
      <div class="playerInfos">     
   <%
   }
  %>
         
    
    <span class="player-name">   
       <b class="server2">&nbsp;&nbsp;&nbsp;</b>&nbsp;<%= game.teams[1].players[0].name %>
    </span>
    <div class="other">
      <span class="club">
      <% 
        if (game.teams[1].players[0].club !== undefined) {  
          print(' '+game.teams[1].players[0].club.name);  
        } 
      %>
      </span>
      <span class="player-rank">
        <%= game.teams[1].players[0].rank %>
      </span>
    </div>
  </div>
  
 
</div></script>
<script type="text/template" id="gameSelect"><div class="ui-grid-a">
          <div class="ui-block-a">
            <div class="form-label" data-i18n="gameadd.court"></div>
          </div>
          <div class="ui-block-b">
            <div class="form-label" data-i18n="gameadd.tour"></div>
          </div>
          <div class="ui-block-a" style="padding-right:5px;">
            <select name="court" id="court" style="width:100%" visible="true">
              <option value=""></option>
              <option value="1"> 1</option>
              <option value="2"> 2</option>
              <option value="3"> 3</option>
              <option value="4"> 4</option>
              <option value="5"> 5</option>
              <option value="6"> 6</option>
              <option value="7"> 7</option>
              <option value="8"> 8</option>
              <option value="9"> 9</option>
              <option value="10"> 10</option>
              <option value="11"> 11</option>
              <option value="">---</option>
              <option value="A"> A</option>
              <option value="B"> B</option>
              <option value="C"> C</option>
              <option value="D"> D</option>
              <option value="E"> E</option>
              <option value="F"> F</option>
            </select>
          </div>
          <div class="ui-block-b" style="padding-left:5px;">
            <select name="tour" id="tour" style="width:100%" visible="true">
                      <option value="1" data-i18n="gameadd.poule"></option>
                      <option value="2" data-i18n="gameadd.consolante"></option>
                      <option value="3" data-i18n="gameadd.select1"></option>
                      <option value="4" data-i18n="gameadd.select2"></option>
                      <option value="5" data-i18n="gameadd.select3"></option>
                      <option value="6" data-i18n="gameadd.select4"></option>
                      <option value="7" data-i18n="gameadd.select5"></option>
                      <option value="8" data-i18n="gameadd.select6"></option>
                      <option value="9" data-i18n="gameadd.select7"></option>
                      <option value="10" data-i18n="gameadd.select8"></option>
                      <option value="11" data-i18n="gameadd.select9"></option>
                      <option value="12" data-i18n="gameadd.select10"></option>
                      <option value="13" data-i18n="gameadd.select11"></option>
                      <option value="14" data-i18n="gameadd.select12"></option>
                      <option value="15" data-i18n="gameadd.select13"></option>
                      <option value="16" data-i18n="gameadd.select14"></option>
                      <option value="17" data-i18n="gameadd.select15"></option>
                      <option value="18" data-i18n="gameadd.select16"></option>
                      <option value="19" data-i18n="gameadd.select17"></option>
                      <option value="20" data-i18n="gameadd.select18"></option>
                      <option value="21" data-i18n="gameadd.select19"></option>
                      <option value="22" data-i18n="gameadd.select20"></option>
                      <option value="23" data-i18n="gameadd.select21"></option>
                      <option value="24" data-i18n="gameadd.select22"></option>
                      <option value="25" data-i18n="gameadd.select23"></option>
                      <option value="26" data-i18n="gameadd.select24"></option>
                      <option value="27" data-i18n="gameadd.select25"></option>
                      <option value="28" data-i18n="gameadd.select26"></option>
                      <option value="29" data-i18n="gameadd.select27"></option>
                      <option value="30" data-i18n="gameadd.select28"></option>
            </select>
          </div>
        </div>

        <div class="ui-grid-a">
          <div class="ui-block-a">
                  <div class="form-label" data-i18n="gameadd.surface"></div>
          </div>
          <div class="ui-block-b">
                  <div class="form-label" data-i18n="gameadd.official"></div>
          </div>
          <div class="ui-block-a" style="padding-right:5px;">
              <select name="surface" id="surface" style="width:100%" visible="true">
                <option value=""></option>
                <option value="BP" data-i18n="gameadd.surface_bp"></option>
                <option value="EP" data-i18n="gameadd.surface_ep"></option>
                <option value="EPDM" data-i18n="gameadd.surface_epdm"></option>
                <option value="GAS" data-i18n="gameadd.surface_gas"></option>
                <option value="GAZ" data-i18n="gameadd.surface_gaz"></option>
                <option value="MOQ" data-i18n="gameadd.surface_moq"></option>
                <option value="NVTB" data-i18n="gameadd.surface_nvtb"></option>
                <option value="PAR" data-i18n="gameadd.surface_par"></option>
                <option value="RES" data-i18n="gameadd.surface_res"></option>
                <option value="TB" data-i18n="gameadd.surface_tb"></option>
              </select>
            </div>
                <div class="ui-block-b" style="padding-right:1px;">
                  <select name="competition" id="competition" style="width:100%" visible="true">
                    <option value="yes" data-i18n="gameadd.yes"></option>  
                    <option value="no" data-i18n="gameadd.no"></option>                       
                   </select>             
                </div>
            </div></script>
<script type="text/template" id="gameShortList"><% if(games.length==0) { %>
<li><p class="message" data-i18n="message.noresult"></p></li>
<% } %> 
<% for (var i = 0; i < games.length; i++) { 

game = games[i]; 

if (game.error!==undefined) 
{
  if (game.error.length > 1 ) 
  {  
%>
<li><p class="message" data-i18n="message.error"></p></li>  
<%
   break;
  }
}

team1_set1 = '&nbsp;'; 
team1_set2 = '&nbsp;'; 
team1_set3 = '&nbsp;';
team2_set1 = '&nbsp;'; 
team2_set2 = '&nbsp;'; 
team2_set3 = '&nbsp;';
set_current = 1; 
team1_sets = '0'; 
team2_sets = '0'; 

if (game.infos.score !== null ) { 
  if(game.infos.score.indexOf('/')!=-1) { 
    scoreboard = game.infos.score.split('/'); 
    team1_sets = scoreboard[0]; 
    team2_sets = scoreboard[1]; 
    } 
} 
  
if (game.infos.sets !== null ) { 
  if (game.infos.sets.indexOf(';')!=-1) { 
    scoreboard = game.infos.sets.split(';'); 
    
    if (scoreboard.length==2 ||scoreboard.length==3) { 
      scoreboard1 = scoreboard[0].split('/');
      team1_set1 = scoreboard1[0]; 
      team2_set1 = scoreboard1[1]; 
      scoreboard2 = scoreboard[1].split('/'); 
      team1_set2 = scoreboard2[0]; 
      team2_set2 = scoreboard2[1]; 
      set_current=2; 
    } 
    
    if (scoreboard.length==3) { 
      scoreboard3 = scoreboard[2].split('/'); 
      team1_set3 = scoreboard3[0]; 
      team2_set3 = scoreboard3[1]; set_current=3; 
    } 
  } 
  // 1 set 
  else { 
    if (game.infos.sets.indexOf('/')!=-1) { 
      scoreboard1 = game.infos.sets.split('/'); 
      team1_set1 = scoreboard1[0]; 
      team2_set1 = scoreboard1[1]; 
    } 
  } 
} 

if (game.dates.start !== undefined ) {  
	//game.dates.startConvert = new Date(game.dates.start);
    game.dates.startConvert = Date.fromString(game.dates.start);
	game.dates.startDate = game.dates.startConvert.getDate()+' '+game.dates.startConvert.getMonthName()+' '+game.dates.startConvert.getFullYear();
}
else
	game.dates.startDate = 'A venir';


if (game.status === "ongoing") game.status = i18n.t('game.ongoing');
else if (game.status === "finished") game.status = i18n.t('game.finished');
else if (game.status === "created") game.status = i18n.t('game.created');
 
%>
<li id="<%= game.id %>">
  <span class="title2"><%= game.teams[0].players[0].name %></span><br/>
  <span class="title3">
  <%= game.teams[0].players[0].rank %> - 
  <% 
    if (game.teams[0].players[0].club !== undefined) {  
      print(game.teams[0].players[0].club.name);  
    } 
  %>   
  </span>
  <br/>
  <span class="title2"><%= game.teams[1].players[0].name %></span><br/>
  <span class="title3">
  <%= game.teams[1].players[0].rank %> - 
  <% 
    if (game.teams[1].players[0].club !== undefined) {  
      print(game.teams[1].players[0].club.name);  
    } 
  %>  
  </span>   
</li>
<% } %>
</script>
<script type="text/template" id="gameShortListpourmarc"><% if(games.length==0) { %>
<li><p class="message" data-i18n="message.noresult"></p></li>
<% } %> 
<% for (var i = 0; i < games.length; i++) { 

game = games[i]; 

if (game.error!==undefined) 
{
  if (game.error.length > 1 ) 
  {  
%>
<li><p class="message" data-i18n="message.error"></p></li>  
<%
   break;
  }
}

team1_set1 = '&nbsp;'; 
team1_set2 = '&nbsp;'; 
team1_set3 = '&nbsp;';
team2_set1 = '&nbsp;'; 
team2_set2 = '&nbsp;'; 
team2_set3 = '&nbsp;';
set_current = 1; 
team1_sets = '0'; 
team2_sets = '0'; 

if (game.infos.score !== null ) { 
  if(game.infos.score.indexOf('/')!=-1) { 
    scoreboard = game.infos.score.split('/'); 
    team1_sets = scoreboard[0]; 
    team2_sets = scoreboard[1]; 
    } 
} 
  
if (game.infos.sets !== null ) { 
  if (game.infos.sets.indexOf(';')!=-1) { 
    scoreboard = game.infos.sets.split(';'); 
    
    if (scoreboard.length==2 ||scoreboard.length==3) { 
      scoreboard1 = scoreboard[0].split('/');
      team1_set1 = scoreboard1[0]; 
      team2_set1 = scoreboard1[1]; 
      scoreboard2 = scoreboard[1].split('/'); 
      team1_set2 = scoreboard2[0]; 
      team2_set2 = scoreboard2[1]; 
      set_current=2; 
    } 
    
    if (scoreboard.length==3) { 
      scoreboard3 = scoreboard[2].split('/'); 
      team1_set3 = scoreboard3[0]; 
      team2_set3 = scoreboard3[1]; set_current=3; 
    } 
  } 
  // 1 set 
  else { 
    if (game.infos.sets.indexOf('/')!=-1) { 
      scoreboard1 = game.infos.sets.split('/'); 
      team1_set1 = scoreboard1[0]; 
      team2_set1 = scoreboard1[1]; 
    } 
  } 
} 

if (game.dates.start !== undefined ) {  
	//game.dates.startConvert = new Date(game.dates.start);
    game.dates.startConvert = Date.fromString(game.dates.start);
	game.dates.startDate = game.dates.startConvert.getDate()+' '+game.dates.startConvert.getMonthName()+' '+game.dates.startConvert.getFullYear();
}
else
	game.dates.startDate = 'A venir';


if (game.status === "ongoing") game.status = i18n.t('game.ongoing');
else if (game.status === "finished") game.status = i18n.t('game.finished');
else if (game.status === "created") game.status = i18n.t('game.created');
 
%>
<li id="<%= game.id %>">
  <span class="title2"><%= game.teams[0].players[0].name %></span><br/>
  <span class="title3">
  <%= game.teams[0].players[0].rank %> - 
  <% 
    if (game.teams[0].players[0].club !== undefined) {  
      print(game.teams[0].players[0].club.name);  
    } 
  %>   
  </span>
  <br/>
  <span class="title2"><%= game.teams[1].players[0].name %></span><br/>
  <span class="title3">
  <%= game.teams[1].players[0].rank %> - 
  <% 
    if (game.teams[1].players[0].club !== undefined) {  
      print(game.teams[1].players[0].club.name);  
    } 
  %>  
  </span>   
</li>
<% } %>
</script>
<script type="text/template" id="index"><div class="index background"></div>
<div class="index content-container">
  <div class="intro">
    <div class="search">
      <div class="text">RECHERCHER UN CLUB</div>
      <div class="bar">
        <input type="search" class="mylib-forms" name="name" id="search-basic" value="" />
        <div class="magnifier">
          <img src="/images/ico-magnifier-glass.jpg" width="15" height="15" style="margin:5px"/>
        </div>
      </div>
    </div>
  </div>
</div></script>
<script type="text/template" id="ongoing"><p class="message" data-i18n="search.ongoing"></p></script>
<script type="text/template" id="player"><div class="info background"></div>
<div class="info content-container">
  <div class="simple">
  
    <div class="ui-grid-a" style="padding-top:10px">
        <div class="ui-block-a" style="width:30%">
        <img src="./images/player-pic.jpg" width="60px" height="60px" />
        </div>
        <div class="ui-block-b titlePlayer" style="width:70%">
        <%= player.name %>
        </div>
    </div> 
     
     <%
     if (player.club !== undefined) 
     {
     %>
    <hr/>
    <b><label data-i18n="playerform.club"></label> :</b> <%= player.club.name %>
    <br/><a href="#clubs/<%= player.club.id %>" data-i18n="player.more"></a>
    <%
    }
    %>
    <hr/>
    <b><label data-i18n="playerform.rank"></label> :</b> <%= player.rank %>
    <br/>
    
    <div class="account">
      <a href="#games/me/<%= player.id %>" id="lastResult" data-i18n="player.lastresults" data-js-navigate></a>
    </div>
 
  </div>
</div>

<!--
  COMMENT SAVE
-->
<div class="button-form">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form">  
  <% if (follow === 'true') { %> 
  <div class="button-selected" id="followButton" data-i18n="message.nofollow"></div> 
  <% } else { %> 
  <div class="button" id="followButton" data-i18n="message.follow"></div>
  <% } %>
  </div>  
</div></script>
<script type="text/template" id="playerForget"><div class="gameAdd background"></div>
<div class="gameAdd content-container">
  <div class="simple" style="padding-top:60px">
  
  	<div>
  		<label class="form-label" data-i18n="playerforget.email"></label>
  	</div>
  	<div>
  		<input type="text" id="email" name="email" data-i18n="[placeholder]playerforget.email;" class='jq-ui-forms-white' value="" /> 
  		<span class="email_error label label-info hide"></span>
  	</div>
  
    <div class="form-button-black"> 
      <span id="forgetPlayer" data-i18n="playerforget.send"></span>
    </div>    
  
   <span class="success label label-info hide"></span>
   <span class="success_sentence label label-info hide"></span>   

  </div>
</div></script>
<script type="text/template" id="playerForm"><div class="blue-screen player-form background"></div>
<div class="blue-screen player-form content-container">
  <div class="container">
    <div class="success label label-info hide"></div>
    
    <div id="intro_firstconnection" class="form-label label-info show-if-first" data-i18n="playerform.firstconnection"></div>
    
    <div>
    	<label  class="form-label" for="name" data-i18n="playerform.name"></label><label  class="form-label show-if-first">*</label> 
    </div>
    <div>
    	<input type="text" id="name" name="name" data-i18n="[placeholder]playerform.name;" value="<%= data.name %>" /> 
    </div>

    <div class="name_error label label-error hide"></div>
    
    <div>
      <label class="form-label" for="rank" data-i18n="playerform.rank"></label>
    </div>
    <div>
      <input type="text" id="rank" name="rank" data-i18n="[placeholder]playerform.rank;" value="<%= data.rank %>" /> 
    </div>    

    <div class="rank_error label label-error hide"></div>
    
    <!-- FIXME: Find club_id in Ajax -->
    <div>
      <label class="form-label" for="club" data-i18n="playerform.clubname"></label>
    </div>
    <div>
      <input type="text" id="club" name="club" data-i18n="[placeholder]playerform.clubname;" value="<%= data.club %>" data-autocomplete="autocompleteClubs" data-autocomplete-onselected="autocompleteChoose"/>
    </div>

    <div class="club_error label label-error hide"></div>

  </div>
  
  <div style="padding:20px"></div>
  
</div>

 
<div class="button-form" data-input-mode="process">
  <div class="background rounded"></div>
  <div class="background trapeze"></div>
  <div class="link-form"><div class="button" id="savePlayer" data-i18n="playerform.save"></div></div>  
</div>

	</script>
<script type="text/template" id="playerList"><% if(players.length==0) { %>
<li><p class="message" data-i18n="message.noresult"></p></li>
<% } %> 
<% for (var i = 0; i < players.length; i++) { 

player = players[i]; 

if (player.error!==undefined) 
{
  if (player.error.length > 1 ) 
  { 
  %>
  <li><p class="message" data-i18n="message.error"></p></li>
  <%
   break;
  }
}
%>
<li class="player" id="#players/<%= player.id %>">
  <div class="ui-grid-a">
    <div class="ui-block-a" style="width: 20%;">
    <img src="./images/player-pic.jpg" width="40px" height="40px" />
    </div>
    <div class="ui-block-b" style="width: 80%;valign:top;">
    <div class="game-player"><%= player.name %></div>
    <div class="infos"><%= player.club.name %>  ( <%= player.rank %> )</div>
    </div>
  </div>
</li>
<% 
} 
%>
</script>
<script type="text/template" id="playerListAutoComplete"><% if(players.length==0) { %>
<li class="player"><p><span data-i18n="message.noresultfor"></span><%= query %></p></li>
<% } %> 
<% for (var i = 0; i < players.length; i++) { player = players[i]; %>

<li class="player" title="<% if (player!==undefined) print(player.id); %>">

<input type="checkbox" name="team<%= select %>_choice" value="<% if (player!==undefined) print(player.id); %>" id="team<%= select %>_choice" class="custom" /> 
<label for="team<%= select %>_name"><% if (player!==undefined) print(player.name); %></label> 
<label for="team<%= select %>_rank"><% if (player!==undefined) print(player.rank); %></label> 
<label for="team<%= select %>_club"><% if (player!==undefined) if (player.club!==undefined) print(player.club.name); %></label>

</li>
<% if (i>5) break; } if (players.length>5) { %>
<li>... ( <%= players.length %> <span data-i18n="message.results"></span>)</li>
<% } %>
</script>
<script type="text/template" id="playerListSearch"><div class="content-container">
  <div class="indexViewTemplate">
   
    <div class="ui-grid-a searchbar">
      <div class="ui-block-a">
        <div class="input-search-background">
          <input type="search" class="mylib-forms" name="search" id="search-basic" value="" data-i18n="[placeholder]search.playerplaceholder;" />
        </div>
        <span class="button-search" style="">
        </span>
      </div>
      
    </div>

    <ul id="listPlayersView" class="ui-listview results"></ul>
  <div>
<div>

</script>
<script type="text/template" id="playerSignin"><div class="blue-screen signin background"></div>
<div class="blue-screen signin content-container">
  <div class="container unregistered">
    <div class="msg label label-info hide"></div>
    <div class="error label label-error hide"></div>

    <!--
     4 status : registered, unregistered, login, registering
    -->
    <div class="hideIfRegistered">
	    <div>
		    <label class="form-label" data-i18n="playersignin.email"></label>
	    </div>
	
	    <div>
	      <input type="email" id="email" name="email" data-i18n="[placeholder]playersignin.email;" value="" />
	    </div>

      <div class="hideIfUnregistered">

        <div class="hideIfLogin label label-info" data-i18n="playersignin.registering"></div>

	      <div>
	        <label class="form-label" for="password" data-i18n="playersignin.password"></label>
	      </div>
  
	      <div>
	        <input type="password" id="password" name="password" data-i18n="[placeholder]playersignin.password" value="" /> 
	      </div>

	      <div class="hideIfLogin">
	        <div>
	          <label class="form-label" for="password" data-i18n="playersignin.passwordconfirm"></label>
	        </div>

	        <input type="password" id="password_confirm" name="password" data-i18n="[placeholder]playersignin.password" value="" /> 
	      </div>
  
        <div class="password_error label label-error hide"></div>
      </div>

      <div id="connexion" class="form-button-black" data-i18n="playersignin.connexion"> 
      </div>
    
      <div id="forgetPassword" class="form-button-white hideIfUnregistered hideIfRegistering hide" data-i18n="playersignin.passwordforgotten">
      </div>
    </div>

    <div class="hideIfUnregistered hideIfLogin hideIfRegistering">
      <div class="label label-info" data-i18n="playersignin.registered"></div>

      <div id="deconnexion" class="form-button-black" data-i18n="playersignin.deconnexion"> </div>
    </div>
  </div>
</div></script>
<script type="text/template" id="searchForm"><div class="gameAdd background"></div>
<div class="gameAdd content-container">
  <div class="">

    <span class="success label label-info hide"></span>
    
    <div style="padding-top:10px;padding-bottom:10px;">
    <span data-i18n="search.introform"></span>    
    </div>

    <div class="ui-grid-a">
	  <div class="ui-block-a">
        <label class="form-label" data-i18n="search.geo"></label>
      </div>
	  <div class="ui-block-b">
        <input type="checkbox" name="searchgeo" value="checkbox">         
	  </div>
      <div class="ui-block-c">
      <span data-i18n="search.infogeo"></span>
      </div>    
      <div class="ui-block-a">
        <label class="form-label" data-i18n="search.myclub"></label> 
        </div>
      <div class="ui-block-b">
          <input type="checkbox" name="searchmyclub" value="checkbox">         
      </div>
      <div class="ui-block-c">
      <span data-i18n="search.infomyclub"></span>
      </div>
      <div class="ui-block-a">
        <label class="form-label" data-i18n="search.clubfollowed"></label> 
        </div>
      <div class="ui-block-b">
          <input type="checkbox" name="searchclubfollowed" value="checkbox">         
      </div>  
      <div class="ui-block-c">
      <span data-i18n="search.infoclubfollowed"></span>
      </div>
      <div class="ui-block-a">
        <label class="form-label" data-i18n="search.gamefollowed"></label>
        </div>
      <div class="ui-block-b">
          <input type="checkbox" name="searchgamefollowed" value="checkbox">         
      </div> 
      <div class="ui-block-c">
      <span data-i18n="search.infogamefollowed"></span>      
      </div>
      <div class="ui-block-a">
        <label class="form-label" data-i18n="search.playerfollowed"></label>
        </div>
      <div class="ui-block-b">
          <input type="checkbox" name="searchplayerfollowed" value="checkbox">         
      </div>    
      <div class="ui-block-c">
      <span data-i18n="search.infoplayerfollowed"></span>      
      </div>           
    </div> 
    
   

  </div>
</div>


</script>